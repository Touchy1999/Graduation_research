read_haptic.m
ハプティックデバイスのデータから位置情報のうちy軸をグラフ化している。ここから動作の開始と終了をクリックしていくことでクリックした点のUNIX時間を取得することができる。それがcsvファイルとして出力される。
make_graph.m
取得した筋電データに加えて、read_haptic.mで取得した動作開始時刻のcsvファイルと終了時刻のcsvを用いて筋電データのUNIX時刻と照合し、開始時刻から終了時刻までの6箇所の筋電データを取得。それを筋活性度に変換し、NMFを行い、決定係数を求め、それをグラフ化している。この決定係数の値が0.9を上回る最小の値を筋シナジーの数として利用する。
display_20_W_and_H.m
取得した筋電データに加えて、read_haptic.mで取得した動作開始時刻のcsvファイルと終了時刻のcsvを用いて筋電データのUNIX時刻と照合し、開始時刻から終了時刻までの6箇所の筋電データを取得。それを筋活性度に変換し、NMFを行うのは上のファイルと同じ。違う点はmake_graph.mで決定した筋シナジーの数をここでは指定する。その上で複数の試行のWとH(NMFの結果得られる行列)をグラフ化する。ここから典型例を採用する。
display_1_W_and_H.m
display_20_W_and_H.mで複数並べた中で典型例が何個目であるかを確認した上で、その一つの典型例をグラフ化する。
gomi.m
取得した動作開始時刻と動作終了時刻のファイルに加えて、ハプティックデバイスのデータ、筋電ファイルの4つを利用する。開始時刻の前にランダムな時間をはさみ、それを新たな開始時刻とする。そのランダムな時間の大きさに応じて終了時刻の後ろにデータを加え、新たな終了時刻を決定する。これらの新たな時刻を利用してハプティックデバイスの力データをforce_(数字).csvとして出力する。また、これらの新しい時刻を用いてハプティックデバイスの力データを決定し、そこからNMFを行い行列Hを求める。ハプティックデバイスのサンプリングレートが930Hzであるのに対し、筋電データのサンプリングレートが280Hzであるので筋電データをダウンサンプリングすることで力データと同じ長さにする。これをemg_(数字).csvとして出力する。
prepare_force_and_emg_for_lstm.m
LSTMの結果出力された力の推定データと実際のデータの類似度を計算するプログラム。LSTMの結果は実行毎に異なるために20回実行し、それらの平均値を採用している。実行すると力のグラフが表示されるが、そこから力の変曲点や動作初期の値をクリックすることで確認できるので、動作全体の類似度だけでなく、動作初期のみの類似度や変曲点付近の類似度を取得することができる。

